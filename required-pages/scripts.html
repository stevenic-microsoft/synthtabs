<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynthOS - Scripts</title>
    <script src="/api/theme-info.js"></script>
    <link rel="stylesheet" href="/api/theme.css">
    <style>.application-title{font-size:22px;font-weight:700;min-height:var(--header-min-height);padding:var(--header-padding-vertical) var(--header-padding-horizontal);line-height:var(--header-line-height);display:flex;align-items:center;justify-content:center;box-sizing:border-box;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));color:#fff;border-radius:12px;width:100%;max-width:800px;box-shadow:0 6px 25px var(--accent-glow);position:relative;z-index:1}.application-content{font-size:14px;color:var(--text-secondary);padding:15px 0;flex-grow:1;width:100%;max-width:800px;position:relative;z-index:1;overflow-y:auto;display:flex;gap:20px}.script-list{width:200px;flex-shrink:0}.script-list ul{list-style:none;background:rgba(15,15,35,.6);border-radius:10px;border:1px solid var(--border-color);overflow:hidden;margin-bottom:10px;max-height:300px;overflow-y:auto}.script-list li{padding:12px 15px;cursor:pointer;transition:.3s;border-bottom:1px solid var(--border-color);color:var(--text-secondary)}.script-list li:last-child{border-bottom:none}.script-list li:hover{background:linear-gradient(135deg,rgba(102,126,234,.2) 0,rgba(118,75,162,.2) 100%);color:var(--accent-tertiary)}.script-list li.active{background:linear-gradient(135deg,rgba(102,126,234,.3) 0,rgba(118,75,162,.3) 100%);color:var(--accent-tertiary);box-shadow:inset 0 0 15px var(--accent-glow)}.add-script-btn,.delete-script-btn,.save-script-btn{width:100%;padding:12px 18px;border:none;border-radius:10px;background:linear-gradient(135deg,var(--accent-primary) 0,var(--accent-secondary) 100%);color:#fff;cursor:pointer;transition:.3s;font-weight:500;font-size:13px;box-shadow:0 3px 15px var(--accent-glow);margin-bottom:8px}.add-script-btn:hover,.save-script-btn:hover{transform:translateY(-2px);box-shadow:0 5px 20px rgba(102,126,234,.5)}.delete-script-btn{background:linear-gradient(135deg,#e74c3c 0,#c0392b 100%);box-shadow:0 3px 15px rgba(231,76,60,.3)}.delete-script-btn:hover{box-shadow:0 5px 20px rgba(231,76,60,.5);transform:translateY(-2px)}.script-detail{flex-grow:1;background:rgba(15,15,35,.6);border-radius:10px;border:1px solid var(--border-color);padding:20px}.script-detail input,.script-detail select{width:100%;padding:12px 15px;margin-bottom:12px;border-radius:8px;border:1px solid var(--border-color);background:rgba(15,15,35,.8);color:var(--text-primary);font-size:13px;transition:.3s}.script-detail input:focus,.script-detail select:focus{outline:0;border-color:var(--text-secondary);box-shadow:0 0 15px var(--accent-glow)}.script-detail select{cursor:pointer}.script-detail select option{background:var(--bg-tertiary);color:var(--text-primary)}.placeholder-message{color:var(--text-secondary);text-align:center;padding:40px 20px;line-height:1.6}.error-message{display:none;color:#e74c3c;font-size:12px;margin-bottom:12px;padding:8px 12px;background:rgba(231,76,60,.1);border-radius:6px;border:1px solid rgba(231,76,60,.3)}.instructions{margin-top:20px;padding:15px;background:linear-gradient(135deg,rgba(102,126,234,.1) 0,rgba(118,75,162,.1) 100%);border-radius:10px;border:1px solid var(--border-color)}.instructions h3{color:var(--accent-tertiary);margin:15px 0 8px;font-size:14px}.instructions h3:first-child{margin-top:0}.instructions p{color:var(--text-secondary);font-size:12px;line-height:1.6;margin-bottom:8px}.instructions code{background:rgba(138,43,226,.3);padding:2px 6px;border-radius:4px;font-family:'Courier New',Courier,monospace;color:var(--accent-tertiary);border:1px solid rgba(240,147,251,.3);font-size:11px}.light-mode .script-detail,.light-mode .script-list ul{background:rgba(255,255,255,.6)}.light-mode .script-detail input,.light-mode .script-detail select{background:rgba(255,255,255,.8);box-shadow:inset 0 2px 10px rgba(118,75,162,.05)}</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/14.1.1/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.1.0/mermaid.min.js"></script>
    <script id="page-info" src="/api/page-info.js?page=scripts"></script>
</head>
<body>
    <div class="chat-panel">
        <div class="chat-header">SynthOS</div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message"><p><strong>SynthOS:</strong> Add or modify scripts that can be executed using the <code>/api/scripts/:id</code> API.</p></div>
        </div>
        <div class="link-group">
            <a href="#" id="saveLink">Save</a>
            <a href="/pages" id="pagesLink">Pages</a>
            <a href="#" id="resetLink">Reset</a>
        </div>
        <form action="/" method="POST" id="chatForm">
            <input type="text" class="chat-input" id="chatInput" name="message" placeholder="Type a message...">
            <button type="submit" class="chat-submit">Send</button>
        </form>
    </div>
    <div class="viewer-panel" id="viewerPanel">
        <div class="application-title">Script Editor</div>
        <div class="application-content">
            <div class="script-list">
                <ul id="scriptList">
                    <!-- Scripts will be loaded here -->
                </ul>
                <button class="add-script-btn">Add New Script</button>
            </div>
            <div class="script-detail">
                <div id="placeholderMessage" class="placeholder-message">
                    Select an existing script to edit or add a new one using the "Add New Script" button.
                </div>
                <input type="text" id="scriptId" placeholder="Script ID" value="" style="display: none;">
                <select id="scriptType" style="display: none;">
                    <option value="command">Command</option>
                </select>
                <input type="text" id="scriptCommand" placeholder="Script Command" style="display: none;">
                <input type="text" id="scriptDescription" placeholder="Usage Description (optional)" style="display: none;">
                <input type="text" id="scriptVariables" placeholder="Variables (optional, e.g., { city: string })" style="display: none;">
                <div id="commandError" class="error-message">Script Command is required.</div>
                <button class="save-script-btn" style="display: none;">Save Changes</button>
                <button class="delete-script-btn" style="display: none;">Delete Script</button>
                <div class="instructions">
                    <h3>Understanding SynthOS Scripts</h3>
                    <p>Scripts in SynthOS are powerful tools that allow you to define custom terminal commands for various tasks. When SynthOS executes a script, it runs the command and captures the console output, which is then returned for further processing or analysis.</p>
                    
                    <h3>Creating Effective Scripts</h3>
                    <p>When writing a script, you can use any valid terminal command. For added flexibility, you can include {{variable}} placeholders, which SynthOS will replace with actual values during execution.</p>
                    
                    <h3>Example: Weather Forecast Script</h3>
                    <p>Here's an example of an interesting script that SynthOS could use:</p>
                    <p><code>curl wttr.in/{{city}}?format=3</code></p>
                    <p>This script fetches a concise weather forecast for a specified city. SynthOS can call this script with different city names to get up-to-date weather information.</p>
                    
                    <h3>Tips for Script Writing</h3>
                    <p>1. Keep commands concise and focused on a single task.</p>
                    <p>2. Use variables for dynamic inputs to make scripts more versatile.</p>
                    <p>3. Consider potential errors and how to handle them.</p>
                    <p>4. Test your scripts thoroughly to ensure they work as expected.</p>
                    <p>5. Provide a clear and concise usage description to help others understand how to use your script.</p>
                    <p>6. Define the expected variables in the Variables field to document the script's requirements.</p>
                    
                    <h3>Using the Description Field</h3>
                    <p>The Description field allows you to provide a brief explanation of what SynthOS can use your script for.</p>
                    
                    <h3>Defining Variables</h3>
                    <p>Use the Variables field to specify any input parameters your script expects. Format it as a JSON object, e.g., { city: string, days?: number }. This helps SynthOS know what inputs it needs to provide when running your script.</p>
                </div>
            </div>
        </div>
        <div id="loadingOverlay" class="loading-overlay"><div class="spinner"></div></div>
    </div>
    <div id="instructions" style="display: none;" data-locked=""></div>
    <div id="thoughts" style="display: none;" data-locked=""></div>
    <script id="script-editor">const scriptList=document.getElementById("scriptList"),scriptId=document.getElementById("scriptId"),scriptType=document.getElementById("scriptType"),scriptCommand=document.getElementById("scriptCommand"),scriptDescription=document.getElementById("scriptDescription"),scriptVariables=document.getElementById("scriptVariables"),addScriptBtn=document.querySelector(".add-script-btn"),saveScriptBtn=document.querySelector(".save-script-btn"),deleteScriptBtn=document.querySelector(".delete-script-btn"),placeholderMessage=document.getElementById("placeholderMessage"),commandError=document.getElementById("commandError");let isNewScript=!1;function showScriptDetails(){placeholderMessage.style.display="none",scriptId.style.display="block",scriptType.style.display="block",scriptCommand.style.display="block",scriptDescription.style.display="block",scriptVariables.style.display="block",saveScriptBtn.style.display="block",deleteScriptBtn.style.display=isNewScript?"none":"block"}function hideScriptDetails(){placeholderMessage.style.display="block",scriptId.style.display="none",scriptType.style.display="none",scriptCommand.style.display="none",scriptDescription.style.display="none",scriptVariables.style.display="none",saveScriptBtn.style.display="none",deleteScriptBtn.style.display="none",commandError.style.display="none"}function formatId(id){return id.toLowerCase().replace(/\s+/g,"-")}function loadScripts(){fetch("/api/data/scripts/scripts").then(response=>response.json()).then(scripts=>{scriptList.innerHTML="",scripts.forEach(script=>{const li=document.createElement("li");li.textContent=script.id,li.dataset.id=script.id,li.dataset.type=script.type,li.dataset.command=script.command,li.dataset.description=script.description||"",li.dataset.variables=script.variables||"",scriptList.appendChild(li)})}).catch(error=>console.error("Error loading scripts:",error))}function saveScript(script){fetch("/api/data/scripts/scripts").then(response=>response.json()).then(scripts=>{scripts.find(s=>s.id===script.id)&&isNewScript?confirm("A script with this ID already exists. Do you want to overwrite it?")&&performSave(script):performSave(script)}).catch(error=>console.error("Error checking existing scripts:",error))}function performSave(script){fetch("/api/data/scripts/scripts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(script)}).then(response=>response.json()).then(savedScript=>{loadScripts(),isNewScript=!1,setTimeout(()=>{const newScriptElement=document.querySelector(`[data-id="${savedScript.id}"]`);newScriptElement&&newScriptElement.click()},100)}).catch(error=>console.error("Error saving script:",error))}function deleteScript(id){confirm("Are you sure you want to delete this script?")&&fetch(`/api/data/scripts/scripts/${id}`,{method:"DELETE"}).then(response=>response.json()).then(result=>{result.success?(loadScripts(),hideScriptDetails()):console.error("Failed to delete script.")}).catch(error=>console.error("Error deleting script:",error))}scriptList.addEventListener("click",e=>{"LI"===e.target.tagName&&(document.querySelectorAll(".script-list li").forEach(li=>li.classList.remove("active")),e.target.classList.add("active"),showScriptDetails(),scriptId.value=e.target.dataset.id,scriptType.value=e.target.dataset.type||"command",scriptCommand.value=e.target.dataset.command||"",scriptDescription.value=e.target.dataset.description||"",scriptVariables.value=e.target.dataset.variables||"",commandError.style.display="none",isNewScript=!1,deleteScriptBtn.style.display="block")}),addScriptBtn.addEventListener("click",()=>{const newId=formatId(`script-${Date.now()}`);showScriptDetails(),scriptId.value=newId,scriptType.value="command",scriptCommand.value="",scriptDescription.value="",scriptVariables.value="",commandError.style.display="none",document.querySelectorAll(".script-list li").forEach(li=>li.classList.remove("active")),isNewScript=!0,deleteScriptBtn.style.display="none"}),saveScriptBtn.addEventListener("click",()=>{scriptCommand.value.trim()?saveScript({id:formatId(scriptId.value),type:scriptType.value,command:scriptCommand.value,description:scriptDescription.value.trim()||void 0,variables:scriptVariables.value.trim()||void 0}):commandError.style.display="block"}),deleteScriptBtn.addEventListener("click",()=>{const id=scriptId.value;id&&deleteScript(id)}),scriptId.addEventListener("input",e=>{e.target.value=formatId(e.target.value)}),scriptCommand.addEventListener("input",()=>{commandError.style.display="none"}),loadScripts(),hideScriptDetails();</script>
<script id="page-helpers" src="/api/page-helpers.js?v=2"></script>
<script id="page-script" src="/api/page-script.js?v=2"></script>

</body></html>