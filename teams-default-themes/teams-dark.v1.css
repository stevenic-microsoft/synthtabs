:root {
    /* ---- Core palette ---- */
    --bg-primary: #1B1B1B;
    --bg-secondary: #2B2B2B;
    --bg-tertiary: #242424;
    --accent-primary: #7B83EB;
    --accent-secondary: #A6ABFF;
    --accent-tertiary: #4F52B2;
    --accent-contrast: #ffffff;
    --accent-glow: rgba(123,131,235,0.2);
    --text-primary: #ffffff;
    --text-secondary: #C8C8C8;
    --text-disabled: #8A8886;
    --border-color: #3F3F3F;
    --border-strong: #5A5A5A;
    --danger: #F1707B;
    --focus-ring: #7B83EB;
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.35);
    --shadow-lg: 0 10px 28px rgba(0,0,0,0.6);
    --scrim: rgba(0,0,0,0.75);

    /* ---- Typography ---- */
    --font: "Segoe UI", system-ui, -apple-system, sans-serif;
    --type-xs: 12px/16px var(--font);
    --type-sm: 13px/20px var(--font);
    --type-md: 16px/22px var(--font);
    --type-lg: 18px/24px var(--font);

    /* ---- Shell layout ---- */
    --header-min-height: 58px;
    --header-padding-vertical: 14px;
    --header-padding-horizontal: 20px;
    --header-line-height: 1.25;

    /* ---- Menu ---- */
    --menu-bg: #2B2B2B;
    --menu-border: #3F3F3F;
    --menu-shadow: 0 10px 28px rgba(0,0,0,0.6);

    /* ---- Alert ---- */
    --alert-error-bg: #3E1F25;  --alert-error-border: #6B2B34; --alert-error-fg: #F1707B; --alert-error-icon: #F1707B;
    --alert-warn-bg: #463100;   --alert-warn-border: #7A5A00;  --alert-warn-fg: #FFD86A;  --alert-warn-icon: #FFD86A;
    --alert-ok-bg: #0D2E0D;     --alert-ok-border: #1E5A1E;    --alert-ok-fg: #7FE07F;    --alert-ok-icon: #7FE07F;
    --alert-info-bg: #1F1F1F;   --alert-info-border: #3F3F3F;  --alert-info-fg: #ffffff;  --alert-info-icon: #C8C8C8;

    /* ---- Input ---- */
    --input-bg: #2B2B2B;
    --input-fg: var(--text-primary);
    --input-border: var(--border-color);
    --input-border-hover: var(--border-strong);
    --input-border-focus: var(--accent-primary);
    --input-underline-focus: var(--accent-primary);
    --input-placeholder: var(--text-disabled);
    --input-prefix-bg: var(--accent-primary);
    --input-prefix-fg: var(--accent-contrast);
    --input-icon-bg: #C8C8C8;

    /* ---- Picker ---- */
    --picker-bg: #2B2B2B;
    --picker-border: var(--border-color);
    --picker-shadow: 0 12px 30px rgba(0,0,0,0.6);

    /* ---- Pivot ---- */
    --pivot-fg: var(--text-secondary);
    --pivot-active-fg: var(--accent-primary);
    --pivot-underline-active: var(--accent-primary);
    --pivot-underline-hover: #8A8886;

    /* ---- Progress ---- */
    --progress-track: #5A5A5A;
    --progress-fill: var(--accent-primary);
    --progress-spinner-track: #5A5A5A;
    --progress-spinner-head: #ffffff;

    /* ---- Radio ---- */
    --radio-border: #8A8886;
    --radio-border-hover: #C8C8C8;
    --radio-dot: var(--accent-primary);
    --radio-disabled-border: #3F3F3F;
    --radio-disabled-bg: #2B2B2B;
    --radio-disabled-dot: #5A5A5A;

    /* ---- Scroll ---- */
    --scroll-track: transparent;
    --scroll-thumb: #5A5A5A;
    --scroll-thumb-hover: #8A8886;
    --scroll-thumb-active: #C8C8C8;
    --scroll-shadow: rgba(0,0,0,0.55);

    /* ---- Search ---- */
    --search-bg: #2B2B2B;
    --search-icon: #C8C8C8;
    --search-placeholder: #8A8886;
    --search-underline: var(--accent-primary);

    /* ---- Status ---- */
    --status-critical-bg: #C4314B;
    --status-critical-fg: #ffffff;
    --status-error: #F1707B;
    --status-warning: #FFD86A;
    --status-success: #7FE07F;
    --status-info: var(--text-secondary);

    /* ---- Toast ---- */
    --toast-bg: #2B2B2B;
    --toast-border: var(--border-color);

    /* ---- Toggle ---- */
    --toggle-track-off: #1F1F1F;
    --toggle-border-off: #8A8886;
    --toggle-thumb: #8A8886;
    --toggle-track-off-hover: #1F1F1F;
    --toggle-border-off-hover: #C8C8C8;
    --toggle-track-off-pressed: #1F1F1F;
    --toggle-border-off-pressed: #FFFFFF;
    --toggle-track-on: var(--accent-primary);
    --toggle-border-on: var(--accent-primary);
    --toggle-track-on-hover: var(--accent-secondary);
    --toggle-border-on-hover: var(--accent-secondary);
    --toggle-track-on-pressed: var(--accent-tertiary);
    --toggle-border-on-pressed: var(--accent-tertiary);
    --toggle-track-disabled: #2B2B2B;
    --toggle-border-disabled: #3F3F3F;
    --toggle-thumb-disabled: #5A5A5A;

    /* ---- Tooltip ---- */
    --tooltip-bg: #3B3A39;
    --tooltip-fg: #ffffff;
    --tooltip-shadow: 0 8px 20px rgba(0,0,0,0.6);
}

/* ================================================================
   SHELL STYLES
   ================================================================ */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font);
    background: var(--bg-primary);
    color: var(--text-primary);
    height: 100vh;
    display: flex;
}

.chat-panel {
    width: 30%;
    background: var(--bg-secondary);
    box-shadow: 1px 0 2px rgba(0,0,0,0.35);
    padding: 20px;
    display: flex;
    flex-direction: column;
    border-right: 1px solid var(--border-color);
    position: relative;
    transition: margin-left 0.3s ease, border-right-color 0.3s ease;
}

.chat-header {
    font-size: 24px;
    min-height: var(--header-min-height);
    padding: var(--header-padding-vertical) var(--header-padding-horizontal);
    line-height: var(--header-line-height);
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    background: var(--accent-primary);
    color: #fff;
    border-radius: 6px;
    box-shadow: var(--shadow-sm);
    letter-spacing: 1px;
    font-weight: 700;
}

.chat-messages {
    flex-grow: 1;
    overflow-y: auto;
    padding: 15px;
    margin-top: 15px;
    background: var(--bg-tertiary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.chat-message {
    margin-bottom: 15px;
    padding: 12px 15px;
    background: var(--bg-secondary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.chat-message p {
    margin-bottom: 5px;
    line-height: 1.5;
}

.chat-message p strong {
    font-weight: 600;
    color: var(--accent-secondary);
}

.chat-message p code {
    background: var(--accent-glow);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Courier New', Courier, monospace;
    color: var(--accent-secondary);
    border: 1px solid var(--border-color);
}

.link-group {
    display: flex;
    justify-content: space-between;
    margin: 15px 0;
    padding: 10px;
    background: var(--bg-tertiary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.link-group a {
    font-size: 14px;
    color: var(--accent-primary);
    text-decoration: none;
    padding: 8px 15px;
    border-radius: 4px;
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

.link-group a:hover {
    background: var(--accent-glow);
    border-color: var(--border-color);
    color: var(--accent-secondary);
}

form {
    display: flex;
    flex-direction: row;
    width: 100%;
    gap: 10px;
    align-items: center;
}

.chat-input {
    padding: 14px 18px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    flex-grow: 1;
    font-size: 14px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    transition: border-color 0.2s ease;
}

.chat-input:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: inset 0 -2px 0 var(--accent-primary);
}

.chat-input::placeholder {
    color: var(--text-disabled);
}

.chat-submit {
    padding: 14px 20px;
    border: none;
    border-radius: 4px;
    font-size: 14px;
    background: var(--accent-primary);
    color: #fff;
    cursor: pointer;
    transition: background 0.2s ease;
    font-weight: 600;
    letter-spacing: 1px;
    white-space: nowrap;
}

.chat-submit:hover {
    background: var(--accent-secondary);
}

.chat-submit:active {
    background: var(--accent-tertiary);
}

.viewer-panel {
    flex: 1;
    min-width: 0;
    padding: 20px 20px 20px 44px;
    background: var(--bg-tertiary);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
}

.viewer-panel.full-viewer {
    padding: 0;
}

.loading-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(27,27,27,0.9);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid var(--border-color);
    border-top-color: var(--accent-primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--scroll-track);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: var(--scroll-thumb);
    border-radius: 10px;
    border: 3px solid var(--bg-primary);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--scroll-thumb-hover);
}

::-webkit-scrollbar-corner {
    background: transparent;
}

* {
    scrollbar-width: thin;
    scrollbar-color: var(--scroll-thumb) transparent;
}

/* ---- Chat Toggle ---- */
.chat-toggle {
    position: fixed;
    left: 30%;
    top: 50%;
    transform: translateY(-50%);
    width: 24px;
    height: 80px;
    background: var(--bg-secondary);
    border: none;
    border-left: 1px solid var(--border-color);
    border-radius: 0 6px 6px 0;
    cursor: pointer;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    transition: left 0.3s ease, background 0.2s ease;
}

.chat-toggle:hover {
    background: #3A3A3A;
}

.chat-toggle-dots {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.chat-toggle-dot {
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: var(--text-secondary);
    transition: transform 0.2s ease;
}

.chat-toggle:hover .chat-toggle-dot {
    transform: scale(1.4);
}

body.chat-collapsed .chat-panel {
    margin-left: -30%;
    border-right-color: transparent;
}

body.chat-collapsed .chat-toggle {
    left: 0;
}

/* ---- Modal ---- */
.modal-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: var(--scrim);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    backdrop-filter: blur(4px);
}

.modal-overlay.show { display: flex; }

.modal-content {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    width: 90%;
    max-width: 450px;
    box-shadow: var(--shadow-lg);
    overflow: hidden;
}

.modal-header {
    background: var(--accent-primary);
    color: white;
    padding: 16px 20px;
    font-size: 18px;
    font-weight: 700;
}

.modal-body { padding: 20px; }

.modal-footer {
    padding: 16px 20px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
}

.modal-footer-right { display: flex; gap: 10px; margin-left: auto; }

/* ---- Form elements ---- */
.form-group { margin-bottom: 16px; }
.form-group:last-child { margin-bottom: 0; }

.form-label {
    display: block;
    font-size: 13px;
    color: var(--text-secondary);
    margin-bottom: 6px;
    font-weight: 600;
}

.form-input {
    width: 100%;
    padding: 10px 14px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    font-size: 14px;
    outline: none;
    transition: border-color 0.2s ease;
    box-sizing: border-box;
}

.form-input:focus { border-color: var(--accent-primary); box-shadow: inset 0 -2px 0 var(--accent-primary); }
.form-input:read-only { opacity: 0.7; cursor: not-allowed; }
.form-input::placeholder { color: var(--text-disabled); }

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}

.checkbox-label input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--accent-primary);
    cursor: pointer;
}

.checkbox-label span { font-size: 14px; color: var(--text-primary); }

/* ---- Modal buttons ---- */
.modal-btn {
    padding: 10px 20px;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease;
    border: none;
}

.modal-btn-primary {
    background: var(--accent-primary);
    color: white;
}

.modal-btn-primary:hover {
    background: var(--accent-secondary);
}

.modal-btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-strong);
}

.modal-btn-secondary:hover {
    background: #3A3A3A;
}

.modal-btn-danger { background: var(--danger); color: white; }

.modal-btn-danger:hover {
    background: #D13438;
}

/* ---- Brainstorm icon button (inside input) ---- */
.chat-input-wrapper {
    position: relative;
    flex: 1;
    display: flex;
    align-items: center;
}

.chat-input-wrapper .chat-input {
    width: 100%;
    padding-right: 36px;
}

.brainstorm-icon-btn {
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s, background 0.2s;
}

.brainstorm-icon-btn:hover {
    color: var(--accent-primary);
    background: var(--accent-glow);
}

/* ---- Brainstorm modal (full-window variant) ---- */
.brainstorm-modal .modal-content {
    max-width: none;
    width: calc(100% - 80px);
    height: calc(100% - 80px);
    display: flex;
    flex-direction: column;
}

.brainstorm-modal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
}

.brainstorm-close-btn {
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    padding: 0 4px;
    line-height: 1;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.brainstorm-close-btn:hover { opacity: 1; }

.brainstorm-messages {
    flex: 1;
    overflow-y: auto;
    scrollbar-gutter: stable;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.brainstorm-message {
    padding: 12px 16px;
    border-radius: 6px;
    font-size: 14px;
    line-height: 1.5;
    max-width: 85%;
    word-wrap: break-word;
}

.brainstorm-user {
    background: var(--accent-primary);
    color: white;
    align-self: flex-end;
}

.brainstorm-assistant {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    align-self: flex-start;
}

.brainstorm-input-row {
    display: flex;
    gap: 8px;
    padding: 16px 20px;
    border-top: 1px solid var(--border-color);
    flex-shrink: 0;
}

.brainstorm-input {
    flex: 1;
    padding: 10px 14px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    font-size: 14px;
    outline: none;
    transition: border-color 0.2s;
}

.brainstorm-input:focus { border-color: var(--accent-primary); }
.brainstorm-input::placeholder { color: var(--text-disabled); }

.brainstorm-send-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    background: var(--accent-primary);
    color: white;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
}

.brainstorm-send-btn:hover {
    background: var(--accent-secondary);
}

.brainstorm-send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.brainstorm-assistant p { margin: 4px 0; }
.brainstorm-assistant pre { background: var(--bg-primary); padding: 10px; border-radius: 4px; overflow-x: auto; margin: 8px 0; }
.brainstorm-assistant code { font-size: 13px; }
.brainstorm-assistant ul, .brainstorm-assistant ol { margin: 4px 0; padding-left: 20px; }

.brainstorm-build-row {
    display: flex;
    justify-content: flex-end;
    margin-top: 10px;
}

.brainstorm-build-btn {
    padding: 6px 16px;
    font-size: 12px;
    font-weight: 600;
    border: none;
    border-radius: 4px;
    background: var(--accent-primary);
    color: white;
    cursor: pointer;
    transition: background 0.2s;
}

.brainstorm-build-btn:hover {
    background: var(--accent-secondary);
}

.brainstorm-suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 10px;
}

.brainstorm-suggestion-chip {
    padding: 5px 12px;
    font-size: 12px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background: var(--bg-primary);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    line-height: 1.4;
}

.brainstorm-suggestion-chip:hover {
    border-color: var(--accent-primary);
    color: var(--accent-primary);
    background: var(--accent-glow);
}

.brainstorm-suggestion-chip:disabled {
    opacity: 0.4;
    cursor: default;
    pointer-events: none;
}

.brainstorm-thinking {
    align-self: flex-start;
    padding: 12px 16px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-secondary);
    font-size: 14px;
    font-style: italic;
}

/* ---- Save Line ---- */
.save-line {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 8px 0 15px;
    font-size: 11px;
    color: var(--text-secondary);
    opacity: 0.7;
}

.save-line::before,
.save-line::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-color);
}

.save-line-label {
    white-space: nowrap;
    letter-spacing: 0.5px;
}

/* ---- Shared page rules ---- */
#loadingOverlay { position: absolute; }
.chat-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
.chat-input:disabled { opacity: 0.5; cursor: not-allowed; }


/* ================================================================
   TEAMS UI KIT — COMPONENT STYLES
   ================================================================ */

/* ===== Hyperlink ===== */
.mt-link{ color:var(--accent-primary); text-decoration:none; cursor:pointer; font:inherit; }
.mt-link:hover{ color:var(--accent-secondary); text-decoration:underline; }
.mt-link:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; border-radius:2px; }
.mt-link[aria-disabled="true"]{ color:var(--text-disabled); pointer-events:none; cursor:default; text-decoration:none; }
.mt-link--truncate{ display:inline-block; max-width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* ===== Button ===== */
.mt-btn{
  display:inline-flex; align-items:center; justify-content:center; gap:6px;
  border-radius:4px; border:1px solid var(--btn-border);
  background:var(--btn-bg); color:var(--btn-fg);
  font:600 var(--type-sm);
  height:32px; padding:0 12px;
  cursor:pointer; user-select:none;
}
.mt-btn[data-size="sm"]{ height:24px; padding:0 8px; font:600 var(--type-xs); }
.mt-btn:hover:not(:disabled){ background:var(--btn-hover-bg); }
.mt-btn:active:not(:disabled){ background:var(--btn-pressed-bg); }
.mt-btn:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-btn:disabled{ background:var(--bg-tertiary); color:var(--text-disabled); border-color:var(--bg-tertiary); cursor:not-allowed; }
.mt-btn[data-icon-only]{ width:32px; padding:0; }
.mt-btn[data-icon-only][data-size="sm"]{ width:24px; }
.mt-btn-group{ display:inline-flex; }
.mt-btn--split{ width:32px; padding:0; }

.mt-btn[data-style="accent"]{
  --btn-bg:var(--accent-primary); --btn-fg:var(--accent-contrast); --btn-border:var(--accent-primary);
  --btn-hover-bg:var(--accent-secondary); --btn-pressed-bg:var(--accent-tertiary);
}
.mt-btn[data-style="neutral"]{
  --btn-bg:var(--bg-secondary); --btn-fg:var(--text-primary); --btn-border:var(--border-color);
  --btn-hover-bg:var(--bg-tertiary); --btn-pressed-bg:var(--bg-tertiary);
}
.mt-btn[data-style="outline"]{
  --btn-bg:transparent; --btn-fg:var(--text-primary); --btn-border:var(--border-strong);
  --btn-hover-bg:var(--bg-tertiary); --btn-pressed-bg:var(--bg-tertiary);
}
.mt-btn[data-style="ghost"]{
  --btn-bg:transparent; --btn-fg:var(--text-primary); --btn-border:transparent;
  --btn-hover-bg:var(--bg-tertiary); --btn-pressed-bg:var(--bg-tertiary);
}

/* ===== Alert ===== */
.mt-alert{
  display:flex; align-items:center; gap:10px;
  min-height:32px; padding:6px 10px;
  border:1px solid var(--alert-border);
  border-radius:4px;
  background:var(--alert-bg);
  color:var(--alert-fg);
}
.mt-alert__icon{ width:14px; height:14px; border-radius:999px; background:var(--alert-icon); }
.mt-alert__message{ font:var(--type-xs); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; flex:1; }
.mt-alert__action{
  height:22px; padding:0 10px; border-radius:3px;
  border:1px solid var(--border-color); background:var(--bg-secondary); color:var(--text-primary);
  font:600 11px/20px var(--font);
}
.mt-alert__dismiss{
  width:22px; height:22px; display:grid; place-items:center;
  border:0; background:transparent; color:var(--text-secondary); border-radius:3px;
}
.mt-alert__action:focus-visible,.mt-alert__dismiss:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }

.mt-alert[data-variant="error"]  { --alert-bg:var(--alert-error-bg);  --alert-border:var(--alert-error-border);  --alert-fg:var(--alert-error-fg);  --alert-icon:var(--alert-error-icon); }
.mt-alert[data-variant="warning"]{ --alert-bg:var(--alert-warn-bg);   --alert-border:var(--alert-warn-border);   --alert-fg:var(--alert-warn-fg);   --alert-icon:var(--alert-warn-icon); }
.mt-alert[data-variant="success"]{ --alert-bg:var(--alert-ok-bg);     --alert-border:var(--alert-ok-border);     --alert-fg:var(--alert-ok-fg);     --alert-icon:var(--alert-ok-icon); }
.mt-alert[data-variant="info"]   { --alert-bg:var(--alert-info-bg);   --alert-border:var(--alert-info-border);   --alert-fg:var(--alert-info-fg);   --alert-icon:var(--alert-info-icon); }

/* ===== Breadcrumb ===== */
.mt-breadcrumb{ font:var(--type-sm); }
.mt-breadcrumb__list{ display:flex; align-items:center; gap:6px; list-style:none; margin:0; padding:0; }
.mt-breadcrumb__sep{ color:var(--text-disabled); user-select:none; }
.mt-breadcrumb__current{ color:var(--text-primary); font-weight:600; }

/* ===== Card ===== */
.mt-card{
  position:relative; display:flex; flex-direction:column; overflow:hidden;
  border-radius:6px; border:1px solid var(--border-color);
  background:var(--bg-secondary); color:var(--text-primary);
  box-shadow:var(--shadow-sm);
}
.mt-card:hover{ box-shadow:var(--shadow-lg); }
.mt-card:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-card[data-size="xs"]{ width:160px; } .mt-card[data-size="sm"]{ width:220px; }
.mt-card[data-size="md"]{ width:280px; } .mt-card[data-size="lg"]{ width:360px; }
.mt-card__media{ aspect-ratio:16/9; background:var(--bg-tertiary); }
.mt-card__media img{ width:100%; height:100%; object-fit:cover; display:block; }
.mt-card__body{ padding:10px 12px; }
.mt-card__header{ display:flex; gap:8px; align-items:flex-start; }
.mt-card__title{ font:600 var(--type-sm); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.mt-card__subtitle{ font:var(--type-xs); color:var(--text-secondary); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.mt-card__menu{ width:28px; height:28px; border:0; background:transparent; color:var(--text-secondary); border-radius:4px; cursor:pointer; }
.mt-card__menu:hover{ background:var(--bg-tertiary); color:var(--text-primary); }
.mt-card__menu:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-card[data-selected="true"]{ border-color:var(--accent-primary); }
.mt-card[data-selected="true"]::after{
  content:"✓"; position:absolute; top:8px; right:8px;
  width:18px; height:18px; border-radius:999px; display:grid; place-items:center;
  background:var(--accent-primary); color:var(--accent-contrast); font:700 12px/1 var(--font);
}
.mt-card[data-disabled="true"]{ background:var(--bg-tertiary); color:var(--text-disabled); box-shadow:none; opacity:.7; pointer-events:none; }

/* ===== Carousel ===== */
.mt-carousel__viewport{ position:relative; overflow:hidden; display:flex; justify-content:center; align-items:center; }
.mt-carousel__track{ display:flex; transition:transform 240ms ease; }
.mt-carousel__slide{ min-width:100%; display:flex; justify-content:center; padding:20px 0; }
.mt-carousel__content{
  width:70%; max-width:600px; aspect-ratio:16/9;
  border-radius:6px; border:1px solid var(--border-color);
  background:var(--bg-secondary); box-shadow:var(--shadow-sm);
  display:grid; place-items:center;
}
.mt-carousel__nav{
  position:absolute; top:50%; transform:translateY(-50%);
  width:36px; height:36px; border-radius:999px; border:0;
  background:transparent; color:var(--text-secondary); cursor:pointer;
}
.mt-carousel__nav--prev{ left:12px; } .mt-carousel__nav--next{ right:12px; }
.mt-carousel__nav:hover{ background:var(--bg-tertiary); color:var(--text-primary); }
.mt-carousel__nav:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-carousel__dots{ display:flex; justify-content:center; gap:6px; margin-top:8px; }
.mt-carousel__dot{ width:6px; height:6px; border-radius:999px; border:0; background:var(--text-disabled); cursor:pointer; }
.mt-carousel__dot[aria-selected="true"]{ background:var(--accent-primary); transform:scale(1.2); }
.mt-carousel__dot:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }

/* ===== Checkbox ===== */
.mt-checkbox{ display:inline-flex; align-items:center; gap:8px; cursor:pointer; font:var(--type-sm); color:var(--text-primary); }
.mt-checkbox__input{ position:absolute; opacity:0; pointer-events:none; }
.mt-checkbox__control{
  width:16px; height:16px; display:grid; place-items:center;
  border-radius:3px; border:1px solid var(--border-strong); background:transparent;
}
.mt-checkbox__icon{ width:12px; height:12px; color:var(--accent-contrast); opacity:0; transform:scale(.85); transition:120ms ease; }
.mt-checkbox:hover .mt-checkbox__control{ border-color:var(--text-primary); }
.mt-checkbox__input:checked + .mt-checkbox__control{ background:var(--accent-primary); border-color:var(--accent-primary); }
.mt-checkbox__input:checked + .mt-checkbox__control .mt-checkbox__icon{ opacity:1; transform:scale(1); }
.mt-checkbox__input:focus-visible + .mt-checkbox__control{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-checkbox__input:disabled + .mt-checkbox__control{ background:var(--bg-tertiary); border-color:var(--border-color); }
.mt-checkbox__input:disabled ~ .mt-checkbox__label{ color:var(--text-disabled); cursor:not-allowed; }

/* ===== Menu ===== */
.mt-menu{
  min-width:180px; max-width:280px; padding:4px;
  border-radius:6px; border:1px solid var(--menu-border);
  background:var(--menu-bg); box-shadow:var(--menu-shadow);
}
.mt-menu__item{
  width:100%; height:32px;
  display:grid; grid-template-columns:20px 1fr auto auto; align-items:center; gap:8px;
  padding:0 8px; border:0; border-radius:4px; background:transparent;
  color:var(--text-primary); font:var(--type-sm); text-align:left; cursor:pointer;
}
.mt-menu__icon{ color:var(--text-secondary); }
.mt-menu__shortcut,.mt-menu__submenu{ color:var(--text-secondary); font:var(--type-xs); }
.mt-menu__item:hover{ background:var(--bg-tertiary); }
.mt-menu__item:active{ background:var(--bg-tertiary); }
.mt-menu__item:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-menu__divider{ height:1px; background:var(--border-color); margin:4px 6px; }
.mt-menu__section{ padding:6px 10px 4px; font:700 11px/14px var(--font); color:var(--text-secondary); }
.mt-menu__item[aria-disabled="true"]{ color:var(--text-disabled); cursor:not-allowed; }
.mt-menu__item[aria-disabled="true"]:hover{ background:transparent; }

/* ===== Dialog ===== */
.mt-dialog{ position:fixed; inset:0; z-index:1100; }
.mt-dialog__scrim{ position:absolute; inset:0; background:var(--scrim); }
.mt-dialog__panel{
  position:relative; margin:10vh auto 0;
  border-radius:8px; border:1px solid var(--border-color);
  background:var(--bg-secondary); box-shadow:0 20px 50px rgba(0,0,0,.5);
  display:flex; flex-direction:column;
}
.mt-dialog__panel[data-size="sm"]{ width:480px; }
.mt-dialog__panel[data-size="md"]{ width:600px; }
.mt-dialog__panel[data-size="lg"]{ width:680px; }
@media (max-width:720px){ .mt-dialog__panel{ width:calc(100% - 32px); } }
.mt-dialog__header{ padding:20px 24px 0; }
.mt-dialog__title{ font:700 var(--type-lg); margin:0; color:var(--text-primary); }
.mt-dialog__body{ padding:16px 24px; font:var(--type-sm); color:var(--text-primary); }
.mt-dialog__error{ padding:0 24px 8px; font:var(--type-xs); color:var(--danger); }
.mt-dialog__footer{ padding:16px 24px 20px; display:flex; justify-content:flex-end; gap:8px; }

/* ===== Dropdown / Field ===== */
.mt-field{ display:flex; flex-direction:column; gap:4px; }
.mt-field__label{ font:700 var(--type-xs); color:var(--text-secondary); }
.mt-field__error{ font:var(--type-xs); color:var(--danger); }
.mt-field__hint{ font:var(--type-xs); color:var(--text-secondary); }

.mt-dropdown{
  height:32px; padding:0 12px; display:flex; align-items:center; justify-content:space-between; gap:8px;
  border-radius:4px; border:1px solid var(--border-color);
  background:var(--bg-secondary); color:var(--text-primary);
  font:var(--type-sm); cursor:pointer;
}
.mt-dropdown:hover{ border-color:var(--text-primary); }
.mt-dropdown:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-dropdown[aria-expanded="true"]{ border-color:var(--accent-primary); box-shadow:inset 0 -2px 0 var(--accent-primary); }
.mt-field[data-state="error"] .mt-dropdown{ border-color:var(--danger); }

/* ===== Group list ===== */
.mt-group__header{
  width:100%; display:flex; align-items:center; gap:6px;
  padding:6px 8px; border:0; background:transparent;
  font:700 var(--type-sm); color:var(--text-primary);
  cursor:pointer; text-align:left;
}
.mt-group__header:hover:not(:disabled){ background:var(--bg-tertiary); }
.mt-group__header:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-group__chevron{ color:var(--text-secondary); transition:transform 120ms ease; }
.mt-group__header[aria-expanded="true"] .mt-group__chevron{ transform:rotate(90deg); }
.mt-group__header:disabled{ color:var(--text-disabled); cursor:not-allowed; }
.mt-group__header:disabled .mt-group__chevron{ color:var(--text-disabled); }
.mt-group__content{ padding-left:20px; }

/* ===== Coachmark ===== */
.mt-coachmark{ position:fixed; inset:0; z-index:1000; }
.mt-coachmark__scrim{ position:absolute; inset:0; background:var(--scrim); }
.mt-coachmark__panel{
  position:absolute;
  min-width:260px; max-width:420px;
  border-radius:8px; border:1px solid var(--border-color);
  background:var(--bg-secondary); box-shadow:var(--shadow-lg);
  padding:16px;
}
.mt-coachmark__title{ font:700 var(--type-md); margin:0 0 8px; color:var(--text-primary); }
.mt-coachmark__body{ font:var(--type-sm); color:var(--text-secondary); }
.mt-coachmark__footer{ display:flex; justify-content:flex-end; gap:8px; margin-top:12px; }
.mt-coachmark__close{
  position:absolute; top:8px; right:8px;
  width:28px; height:28px; border:0; background:transparent;
  color:var(--text-secondary); border-radius:4px; cursor:pointer;
}
.mt-coachmark__close:hover{ background:var(--bg-tertiary); color:var(--text-primary); }
.mt-coachmark__close:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }

/* ===== Input ===== */
.mt-input{
  height:32px; padding:0 12px;
  display:flex; align-items:center; gap:8px;
  border-radius:4px;
  border:1px solid var(--input-border);
  background:var(--input-bg);
  color:var(--input-fg);
}
.mt-input[data-size="sm"]{ height:24px; padding:0 8px; }
.mt-input:hover{ border-color:var(--input-border-hover); }
.mt-input__control{
  width:100%; border:0; outline:none; background:transparent;
  color:inherit; font:var(--type-sm); min-width:0;
}
.mt-input[data-size="sm"] .mt-input__control{ font:var(--type-xs); }
.mt-input__control::placeholder{ color:var(--input-placeholder); }
.mt-input:focus-within{
  border-color:var(--input-border-focus);
  box-shadow: inset 0 -2px 0 var(--input-underline-focus);
}
.mt-input__control:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; border-radius:2px; }
.mt-input[data-disabled="true"]{ background:var(--bg-tertiary); border-color:var(--border-color); color:var(--text-disabled); }
.mt-input__control:disabled{ cursor:not-allowed; }
.mt-input__prefix{ display:inline-flex; align-items:center; justify-content:center; flex:0 0 auto; }
.mt-input__prefix--chip{
  height:20px; padding:0 6px; border-radius:3px;
  background:var(--input-prefix-bg); color:var(--input-prefix-fg);
  font:600 11px/20px var(--font);
}
.mt-input__prefix--icon{ width:16px; height:16px; border-radius:2px; background:var(--input-icon-bg); }
.mt-input__end{
  width:22px; height:22px; display:grid; place-items:center;
  border:0; border-radius:3px;
  background:transparent; color:var(--text-secondary);
  cursor:pointer;
}
.mt-input__end:hover{ background:var(--bg-tertiary); color:var(--text-primary); }
.mt-input__end:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-field[data-state="error"] .mt-input{
  border-color:var(--danger);
  box-shadow: inset 0 -2px 0 var(--danger);
}

/* ===== Key value pair ===== */
.mt-kvp{ display:flex; flex-direction:column; gap:18px; }
.mt-kvp__row{ display:grid; grid-template-columns:160px 1fr; column-gap:28px; align-items:start; }
.mt-kvp__key{
  font:700 var(--type-xs); color:var(--text-secondary);
  text-transform:uppercase; letter-spacing:.02em;
}
.mt-kvp__value{ display:flex; flex-direction:column; gap:6px; }
.mt-kvp__text-title{ font:600 var(--type-xs); color:var(--text-primary); }
.mt-kvp__text-sub{ font:var(--type-xs); color:var(--text-secondary); }

/* ===== Paragraph ===== */
.mt-paragraph{ max-width:520px; color:var(--text-primary); }
.mt-paragraph__headline{ margin:0 0 10px; font:700 var(--type-lg); color:var(--text-primary); }
.mt-paragraph__desc{ margin:0 0 18px; font:var(--type-xs); color:var(--text-secondary); }
.mt-paragraph__subhead{ margin:0 0 8px; font:700 var(--type-sm); color:var(--text-primary); }
.mt-paragraph__body{ margin:0 0 14px; font:var(--type-xs); color:var(--text-secondary); }
.mt-paragraph__meta{ margin:0; font:var(--type-xs); color:var(--text-secondary); }

/* ===== Picker ===== */
.mt-picker{ position:relative; }
.mt-picker__panel{
  position:absolute; top:calc(100% + 4px); left:0; width:100%;
  max-height:280px; overflow:auto;
  border-radius:6px; border:1px solid var(--picker-border);
  background:var(--picker-bg); box-shadow:var(--picker-shadow);
  padding:4px; display:none; z-index:100;
}
.mt-picker[data-open="true"] .mt-picker__panel{ display:block; }
.mt-picker__option{
  width:100%; height:40px;
  display:flex; align-items:center; gap:10px;
  padding:0 10px; border:0; border-radius:4px;
  background:transparent; color:var(--text-primary);
  font:var(--type-sm); text-align:left; cursor:pointer;
}
.mt-picker__option:hover{ background:var(--bg-tertiary); }
.mt-picker__option[data-selected="true"]{ background:var(--bg-tertiary); }
.mt-picker__option-label{ font-weight:600; }
.mt-picker__option-meta{ font:var(--type-xs); color:var(--text-secondary); }

.mt-avatar{
  width:24px; height:24px; border-radius:999px;
  background:var(--accent-primary); color:var(--accent-contrast);
  font:600 11px/24px var(--font); text-align:center;
}
.mt-picker__file-icon{ width:20px; height:20px; border-radius:3px; background:var(--accent-primary); }

/* Date */
.mt-date__header{ display:flex; justify-content:space-between; align-items:center; padding:6px 8px; font:600 var(--type-sm); }
.mt-date__nav{
  width:28px; height:28px; border:0; border-radius:4px;
  background:transparent; color:var(--text-secondary); cursor:pointer;
}
.mt-date__nav:hover{ background:var(--bg-tertiary); }
.mt-date__grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:4px; padding:8px; }
.mt-date__cell{
  height:32px; border:0; border-radius:4px;
  background:transparent; color:var(--text-primary);
  font:var(--type-xs); cursor:pointer;
}
.mt-date__cell:hover{ background:var(--bg-tertiary); }
.mt-date__cell[data-selected="true"]{ background:var(--accent-primary); color:var(--accent-contrast); }

/* Time */
.mt-time__row{ display:flex; gap:8px; padding:8px; }
.mt-time__input{
  flex:1; height:32px; border-radius:4px;
  border:1px solid var(--border-color); background:var(--bg-secondary);
  color:var(--text-primary); padding:0 8px; font:var(--type-sm);
}
.mt-time__input:focus{ outline:2px solid var(--focus-ring); outline-offset:2px; }

/* ===== Pivot ===== */
.mt-pivot__list{ display:flex; align-items:flex-end; gap:24px; }
.mt-pivot__tab{
  position:relative; height:32px; padding:0;
  border:0; background:transparent; cursor:pointer;
  font:600 var(--type-sm);
  color:var(--pivot-fg);
}
.mt-pivot__tab::after{
  content:""; position:absolute; left:0; right:0; bottom:-2px;
  height:2px; border-radius:2px; background:transparent; transition:120ms ease;
}
.mt-pivot__tab:hover::after{ background:var(--pivot-underline-hover); }
.mt-pivot__tab[aria-selected="true"]{ color:var(--pivot-active-fg); }
.mt-pivot__tab[aria-selected="true"]::after{ background:var(--pivot-underline-active); }
.mt-pivot__tab:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:4px; border-radius:4px; }

/* ===== Progress ===== */
.mt-progress{ display:flex; align-items:center; gap:14px; color:var(--text-primary); }
.mt-progress__spinner{
  width:16px; height:16px; border-radius:999px;
  border:2px solid var(--progress-spinner-track);
  border-top-color: var(--progress-spinner-head);
  box-sizing:border-box;
  animation: mt-spin 900ms linear infinite;
}
@keyframes mt-spin{ to{ transform:rotate(360deg); } }

.mt-progress[data-variant="determinate"]{ align-items:flex-start; gap:16px; }
.mt-progress__text{ min-width:120px; }
.mt-progress__label{ font:600 var(--type-xs); color:var(--text-primary); margin:0 0 2px; }
.mt-progress__desc{ font:var(--type-xs); color:var(--text-secondary); margin:0; }
.mt-progress__bar{
  flex:1; min-width:220px; height:2px; border-radius:999px;
  background:var(--progress-track); overflow:hidden; margin-top:8px;
}
.mt-progress__fill{ height:100%; background:var(--progress-fill); border-radius:999px; transition:width 200ms ease; }
@media (prefers-reduced-motion: reduce){
  .mt-progress__spinner{ animation:none; }
  .mt-progress__fill{ transition:none; }
}

/* ===== Radio ===== */
.mt-radio-group{ display:flex; flex-direction:column; gap:8px; }
.mt-radio{
  display:inline-flex; align-items:center; gap:8px;
  cursor:pointer; font:var(--type-sm); color:var(--text-primary); position:relative;
}
.mt-radio__input{ position:absolute; opacity:0; pointer-events:none; }
.mt-radio__control{
  width:16px; height:16px; border-radius:999px;
  border:1px solid var(--radio-border); background:transparent;
  position:relative; transition:120ms ease;
}
.mt-radio__control::after{
  content:""; width:8px; height:8px; border-radius:999px;
  background:var(--radio-dot);
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%) scale(.6);
  opacity:0; transition:120ms ease;
}
.mt-radio:hover .mt-radio__control{ border-color:var(--radio-border-hover); }
.mt-radio__input:checked + .mt-radio__control{ border-color:var(--accent-primary); }
.mt-radio__input:checked + .mt-radio__control::after{ opacity:1; transform:translate(-50%,-50%) scale(1); }
.mt-radio__input:focus-visible + .mt-radio__control{ outline:2px solid var(--focus-ring); outline-offset:3px; }
.mt-radio__input:disabled + .mt-radio__control{ border-color:var(--radio-disabled-border); background:var(--radio-disabled-bg); }
.mt-radio__input:disabled + .mt-radio__control::after{ background:var(--radio-disabled-dot); }
.mt-radio__input:disabled ~ .mt-radio__label{ color:var(--text-disabled); cursor:not-allowed; }

/* ===== Scroll region ===== */
.mt-scroll{
  max-height:120px; overflow:auto;
  padding:10px 12px;
  border:1px solid var(--border-color);
  border-radius:4px;
  background:var(--bg-secondary);
  color:var(--text-primary);
  font:var(--type-xs);
  box-shadow: inset -10px 0 10px -12px var(--scroll-shadow);
  scrollbar-width: thin;
  scrollbar-color: var(--scroll-thumb) var(--scroll-track);
}
.mt-scroll::-webkit-scrollbar{ width:10px; height:10px; }
.mt-scroll::-webkit-scrollbar-track{ background:var(--scroll-track); border-radius:999px; }
.mt-scroll::-webkit-scrollbar-thumb{
  background:var(--scroll-thumb); border-radius:999px;
  border:3px solid var(--scroll-track);
}
.mt-scroll::-webkit-scrollbar-thumb:hover{ background:var(--scroll-thumb-hover); }
.mt-scroll::-webkit-scrollbar-thumb:active{ background:var(--scroll-thumb-active); }
.mt-scroll::-webkit-scrollbar-corner{ background:transparent; }

/* ===== Search box ===== */
.mt-search__box{
  height:32px; padding:0 10px;
  display:flex; align-items:center; gap:8px;
  border-radius:4px;
  border:1px solid transparent;
  background:var(--search-bg);
  color:var(--text-primary);
}
.mt-search__icon{ width:16px; height:16px; border-radius:2px; background:var(--search-icon); flex:0 0 auto; }
.mt-search__input{
  width:100%; border:0; outline:none; background:transparent;
  color:inherit; font:var(--type-sm); min-width:0;
}
.mt-search__input::placeholder{ color:var(--search-placeholder); }
.mt-search__box:focus-within{ box-shadow: inset 0 -2px 0 var(--search-underline); }
.mt-search__input:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; border-radius:2px; }
.mt-search__clear{
  width:22px; height:22px; display:grid; place-items:center;
  border:0; border-radius:3px;
  background:transparent; color:var(--text-secondary);
  cursor:pointer; flex:0 0 auto;
}
.mt-search__clear:hover{ background:var(--bg-tertiary); color:var(--text-primary); }
.mt-search__clear:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }

/* ===== Side panel ===== */
.mt-sidepanel{ position:fixed; inset:0; z-index:1200; pointer-events:none; }
.mt-sidepanel__scrim{ position:absolute; inset:0; background:var(--scrim); opacity:0; transition:opacity 180ms ease; }
.mt-sidepanel__panel{
  position:absolute; top:0; right:0; height:100%;
  display:flex; flex-direction:column;
  background:var(--bg-secondary);
  border-left:1px solid var(--border-color);
  box-shadow:var(--shadow-lg);
  transform:translateX(100%);
  transition:transform 220ms ease;
  pointer-events:auto;
}
.mt-sidepanel__panel[data-size="sm"]{ width:320px; }
.mt-sidepanel__panel[data-size="md"]{ width:400px; }
.mt-sidepanel__panel[data-size="lg"]{ width:480px; }
.mt-sidepanel[data-open="true"]{ pointer-events:auto; }
.mt-sidepanel[data-open="true"] .mt-sidepanel__scrim{ opacity:1; }
.mt-sidepanel[data-open="true"] .mt-sidepanel__panel{ transform:translateX(0); }

.mt-sidepanel__header{
  height:56px; padding:0 16px;
  display:flex; align-items:center; justify-content:space-between;
  border-bottom:1px solid var(--border-color);
}
.mt-sidepanel__title{ margin:0; font:700 var(--type-md); color:var(--text-primary); }
.mt-sidepanel__close{
  width:32px; height:32px; border:0; border-radius:4px;
  background:transparent; color:var(--text-secondary); cursor:pointer;
}
.mt-sidepanel__close:hover{ background:var(--bg-tertiary); color:var(--text-primary); }
.mt-sidepanel__close:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }

.mt-sidepanel__body{ flex:1; overflow:auto; padding:16px; color:var(--text-primary); }
.mt-sidepanel__footer{
  padding:12px 16px; border-top:1px solid var(--border-color);
  display:flex; justify-content:flex-end; gap:8px;
  background:var(--bg-secondary);
}

/* ===== Status label ===== */
.mt-status{ display:inline-flex; align-items:center; gap:6px; font:600 var(--type-xs); color:var(--status-color); }
.mt-status__icon{
  width:14px; height:14px; display:grid; place-items:center;
  font:700 10px/1 var(--font); color:currentColor;
}
.mt-status[data-variant="critical"]{
  height:18px; padding:0 8px; border-radius:3px;
  background:var(--status-critical-bg); color:var(--status-critical-fg);
}
.mt-status[data-variant="critical"] .mt-status__icon{ color:var(--status-critical-fg); }
.mt-status[data-variant="error"]{ --status-color: var(--status-error); }
.mt-status[data-variant="warning"]{ --status-color: var(--status-warning); }
.mt-status[data-variant="success"]{ --status-color: var(--status-success); }
.mt-status[data-variant="info"]{ --status-color: var(--status-info); }

/* ===== Toast ===== */
.mt-toast-stack{
  position:fixed; bottom:16px; right:16px;
  display:flex; flex-direction:column; gap:12px;
  z-index:1300;
}
.mt-toast{
  width:320px; border-radius:6px;
  background:var(--toast-bg); color:var(--text-primary);
  border:1px solid var(--toast-border);
  box-shadow:var(--shadow-lg);
  display:flex; flex-direction:column; overflow:hidden;
  animation: mt-toast-in 180ms ease;
}
@keyframes mt-toast-in{ from{ transform:translateY(8px); opacity:0; } to{ transform:translateY(0); opacity:1; } }
.mt-toast__header{ display:flex; align-items:flex-start; gap:10px; padding:12px 12px 8px; }
.mt-toast__avatar{ width:28px; height:28px; border-radius:999px; background:var(--accent-primary); flex:0 0 auto; }
.mt-toast__meta{ flex:1; min-width:0; }
.mt-toast__title{ font:600 var(--type-sm); color:var(--text-primary); }
.mt-toast__subtitle{ font:var(--type-xs); color:var(--text-secondary); }
.mt-toast__close{
  width:28px; height:28px; border:0; background:transparent;
  border-radius:4px; color:var(--text-secondary); cursor:pointer;
}
.mt-toast__close:hover{ background:var(--bg-tertiary); color:var(--text-primary); }
.mt-toast__close:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-toast__body{ padding:0 12px 10px; }
.mt-toast__message{ font:var(--type-xs); color:var(--text-secondary); }
.mt-toast__reply{ display:flex; align-items:center; gap:6px; padding:8px 10px 10px; border-top:1px solid var(--border-color); }
.mt-toast__input{
  flex:1; height:28px; border-radius:4px;
  border:1px solid var(--border-color); background:var(--bg-secondary);
  color:var(--text-primary); padding:0 8px; font:var(--type-xs);
}
.mt-toast__input:focus{ outline:2px solid var(--focus-ring); outline-offset:2px; }
.mt-toast__send{
  width:28px; height:28px; border:0; border-radius:4px;
  background:var(--accent-primary); color:var(--accent-contrast); cursor:pointer;
}
.mt-toast__send:hover{ background:var(--accent-secondary); }
.mt-toast[data-variant="accent"]{ background:var(--accent-primary); color:var(--accent-contrast); border-color:var(--accent-primary); }
.mt-toast[data-variant="accent"] .mt-toast__subtitle,
.mt-toast[data-variant="accent"] .mt-toast__message{ color:rgba(255,255,255,.9); }
.mt-toast[data-variant="accent"] .mt-toast__close{ color:rgba(255,255,255,.8); }

/* ===== Toggle ===== */
.mt-toggle{ display:inline-flex; align-items:center; gap:8px; cursor:pointer; user-select:none; color:var(--text-primary); }
.mt-toggle__input{ position:absolute; opacity:0; pointer-events:none; }
.mt-toggle__track{
  width:28px; height:16px; border-radius:999px;
  background:var(--toggle-track-off);
  border:1px solid var(--toggle-border-off);
  position:relative; transition:120ms ease; box-sizing:border-box;
}
.mt-toggle__thumb{
  width:12px; height:12px; border-radius:999px;
  background:var(--toggle-thumb);
  position:absolute; top:1px; left:1px;
  transition:120ms ease;
}
.mt-toggle__input:checked + .mt-toggle__track{
  background:var(--toggle-track-on);
  border-color:var(--toggle-border-on);
}
.mt-toggle__input:checked + .mt-toggle__track .mt-toggle__thumb{ transform:translateX(12px); }

.mt-toggle:hover .mt-toggle__track{ background:var(--toggle-track-off-hover); border-color:var(--toggle-border-off-hover); }
.mt-toggle:hover .mt-toggle__input:checked + .mt-toggle__track{ background:var(--toggle-track-on-hover); border-color:var(--toggle-border-on-hover); }
.mt-toggle:active .mt-toggle__track{ background:var(--toggle-track-off-pressed); border-color:var(--toggle-border-off-pressed); }
.mt-toggle:active .mt-toggle__input:checked + .mt-toggle__track{ background:var(--toggle-track-on-pressed); border-color:var(--toggle-border-on-pressed); }
.mt-toggle__input:focus-visible + .mt-toggle__track{ outline:2px solid var(--focus-ring); outline-offset:3px; }
.mt-toggle__input:disabled + .mt-toggle__track{ background:var(--toggle-track-disabled); border-color:var(--toggle-border-disabled); }
.mt-toggle__input:disabled + .mt-toggle__track .mt-toggle__thumb{ background:var(--toggle-thumb-disabled); }
.mt-toggle__input:disabled ~ .mt-toggle__label{ color:var(--text-disabled); }

/* ===== Tooltip ===== */
.mt-tooltip{
  position:absolute; z-index:1400;
  max-width:220px;
  padding:6px 8px;
  border-radius:4px;
  font:var(--type-xs);
  white-space:nowrap;
  background:var(--tooltip-bg);
  color:var(--tooltip-fg);
  box-shadow:var(--tooltip-shadow);
  opacity:0;
  transform:translateY(2px);
  pointer-events:none;
  transition:opacity 120ms ease, transform 120ms ease;
}
.mt-tooltip[data-open="true"]{ opacity:1; transform:translateY(0); }
.mt-tooltip::after{
  content:"";
  position:absolute;
  width:8px; height:8px;
  background:var(--tooltip-bg);
  transform:rotate(45deg);
}
.mt-tooltip[data-placement="top"]::after{ bottom:-4px; left:50%; transform:translateX(-50%) rotate(45deg); }
.mt-tooltip[data-placement="bottom"]::after{ top:-4px; left:50%; transform:translateX(-50%) rotate(45deg); }
.mt-tooltip[data-placement="left"]::after{ right:-4px; top:50%; transform:translateY(-50%) rotate(45deg); }
.mt-tooltip[data-placement="right"]::after{ left:-4px; top:50%; transform:translateY(-50%) rotate(45deg); }
